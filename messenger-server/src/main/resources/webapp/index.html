<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Messenger</title>
    <!--    <style type="text/css"></style>-->
    <link rel="stylesheet" href="css/messenger.css">
    <!--TODO по возможности не использовать jquery-ui -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <!--    <script type="text/javascript" src="jquery/jquery-3.3.1.min.js"></script>-->
    <!--TODO по возможности не использовать jquery-ui -->
    <script type="text/javascript"
            src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/messenger-ui.js"></script>
    <script type="text/javascript" src="js/messenger-ws.js"></script>
    <script type="text/javascript" src="js/messenger-api.js"></script>
    <script type="text/javascript" src="panel/left_panel/user_info/user_info.js"></script>
    <script type="text/javascript" src="panel/left_panel/chat_list_tab/chat_list_tab.js"></script>
    <script type="text/javascript">

        function errorShow(data) {
            //TODO
            debugger;
            console.log(data)
            $('.help_panel').append(data);
        }

        function speak(text) {
            var url = 'https://tts.voicetech.yandex.net/generate?' +
                'key=069b6659-984b-4c5f-880e-aaedcfd84102' +
                '&text=' + encodeURI(text) +
                '&format=opus' +
                '&lang=ru-RU' +
                '&speed=1.1' +
                '&speaker=oksana';

            // -levitan
            // ermilov 1.3
            // -zahar
            // silaerkan 1.0
            // + oksana 1.1
            // -jane
            // -omazh
            // kolya
            // kostya
            // -nastya
            // sasha
            // nick
            // +erkanyavas
            // zhenya
            // tanya
            // ermil
            // anton_samokhvalov
            // tatyana_abramova
            // voicesearch
            // +alyss
            // ermil_with_tuning
            // robot
            // +dude
            // +zombie
            // smoky

            var audio = document.getElementById('audio');
            audio.src = url;
            audio.onloadeddata = function () {
                audio.play();
            };
            audio.load();
        }
    </script>
</head>
<body onload="ui.body.on_load()">
<table id="body_table">
    <tr>
        <td class="left_panel" rowspan="3">
            <table>
                <tr class="user_info_row">
                    <td>
                        <table class="user_info_panel">
                            <tr>
                                <td class="user_info_icon">
                                    icon
                                </td>
                                <td class="user_info_name"></td>
                                <td class="user_info_menu"
                                    onclick="ui.left_panel.user_info.menu.toggle()">
                                    <svg version="1.1" width="20" height="20">
                                        <circle cx="4" cy="10" r="2" fill="DimGray"/>
                                        <circle cx="10" cy="10" r="2" fill="DimGray"/>
                                        <circle cx="16" cy="10" r="2" fill="DimGray"/>
                                    </svg>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr class="find_row">
                    <td>
                        <table class="find_panel">
                            <tr>
                                <td class="find_textfield">
                                    <input type="text" onkeydown="ui.left_panel.find_panel.textfield.onkeydown(event)"
                                           onfocusout="ui.left_panel.find_panel.findingArea.hide()"/>
                                </td>
                                <td class="find_button" onclick="ui.left_panel.find_panel.button.onclick()">
                                    <svg version="1.1" width="20" height="20">
                                        <circle cx="9" cy="8" r="5" fill="DimGray "/>
                                        <line x1="14" y1="13" x2="19" y2="18" stroke-width="2" stroke="DimGray"/>
                                    </svg>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr class="tab_row">
                    <td>
                        <table class="tabs">
                            <tr>
                                <td class="chat_tab current" onclick="ui.left_panel.tabs.chat_tab.on_click()">Портфель
                                </td>
                                <td class="contact_tab" onclick="ui.left_panel.tabs.contact_tab.on_click()">
                                    Контакты
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr class="tab_row">
                    <td>
                        <table class="tabs chat_tabs">
                            <tr>
                                <td class="chat_list_tab current"
                                    onclick="ui.left_panel.tabs.chat_tab.tabs.chat_list_tab.on_click()">last
                                </td>
                                <td class="chat_tree_tab"
                                    onclick="ui.left_panel.tabs.chat_tab.tabs.chat_tree_tab.on_click()">tree
                                </td>
                                <td class="chat_outbox_tab"
                                    onclick="ui.left_panel.tabs.chat_tab.tabs.chat_outbox_tab.on_click()">outbox
                                </td>
                                <td class="chat_inbox_tab"
                                    onclick="ui.left_panel.tabs.chat_tab.tabs.chat_inbox_tab.on_click()">inbox
                                </td>
                            </tr>
                        </table>

                        <table class="tabs contact_tabs">
                            <tr>
                                <td class="contact_list_tab current"
                                    onclick="ui.left_panel.tabs.contact_tab.tabs.contact_list_tab.on_click()">list
                                </td>
                                <td class="contact_tree_tab"
                                    onclick="ui.left_panel.tabs.contact_tab.tabs.contact_tree_tab.on_click()">tree
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td class="tab_panel">
                        <table class="chat_list_panel">

                        </table>

                        <div class="chat_tree_panel">
                            chat tree TODO
                        </div>

                        <table class="chat_outbox_panel">
                            <!--TODO-->
                            <tr>
                                <td class="chat_item">outbox chat1</td>
                            </tr>
                            <tr>
                                <td class="chat_item">outbox chat2</td>
                            </tr>
                            <tr>
                                <td class="chat_item">outbox chat3</td>
                            </tr>
                            <tr>
                                <td class="chat_item">outbox chat4</td>
                            </tr>
                            <tr>
                                <td class="chat_item">outbox chat5</td>
                            </tr>
                            <tr>
                                <td class="chat_item">outbox chat6</td>
                            </tr>
                        </table>

                        <table class="chat_inbox_panel">
                            <!--TODO-->
                            <tr>
                                <td class="chat_item">inbox chat1</td>
                            </tr>
                            <tr>
                                <td class="chat_item">inbox chat2</td>
                            </tr>
                            <tr>
                                <td class="chat_item">inbox chat3</td>
                            </tr>
                            <tr>
                                <td class="chat_item">inbox chat4</td>
                            </tr>
                            <tr>
                                <td class="chat_item">inbox chat5</td>
                            </tr>
                            <tr>
                                <td class="chat_item">inbox chat6</td>
                            </tr>
                        </table>

                        <table class="contact_list_panel">
                            <!--TODO-->
                            <tr>
                                <td class="contact_split">В сети</td>
                            </tr>
                            <tr>
                                <td class="contact_item">user1</td>
                            </tr>
                            <tr>
                                <td class="contact_item">user2</td>
                            </tr>
                            <tr>
                                <td class="contact_item">user3</td>
                            </tr>
                            <tr>
                                <td class="contact_item">user4</td>
                            </tr>
                            <tr>
                                <td class="contact_split">Не в сети</td>
                            </tr>
                            <tr>
                                <td class="contact_item">user5</td>
                            </tr>
                            <tr>
                                <td class="contact_item">user6</td>
                            </tr>
                            <tr>
                                <td></td>
                            </tr>
                        </table>

                        <div class="contact_tree_panel">
                            user tree TODO
                        </div>
                    </td>
                </tr>
            </table>
        </td>
        <td class="open_close_left_panel" rowspan="3" onclick="ui.left_panel.open_close_button.on_click()"></td>
        <td class="chat_info">
            <table class="chat_info_panel">
                <tr>
                    <td class="chat_info_icon">icon</td>
                    <td class="chat_info_name">Username</td>
                    <td class="chat_info_action">action</td>
                </tr>
                <tr>
                    <td class="chat_info_users" colspan="3">
                        users
                    </td>
                </tr>
            </table>
        </td>
        <td class="open_close_right_panel" rowspan="3" onclick="ui.right_panel.open_close_button.on_click()"></td>
        <td class="right_panel" rowspan="3">
            3
        </td>
    </tr>
    <tr>
        <td class="chat_messages">
            <table class="chat_messages_panel">
                <tr>
                    <td>2018.01.01</td>
                </tr>
                <tr>
                    <td class="message">
                        <table>
                            <tr>
                                <td rowspan="2">icon</td>
                                <td>username</td>
                                <td>time</td>
                                <td>menu</td>
                            </tr>
                            <tr>
                                <td colspan="3">message</td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td class="message">
                        <table>
                            <tr>
                                <td rowspan="2">icon</td>
                                <td>username</td>
                                <td>time</td>
                                <td>menu</td>
                            </tr>
                            <tr>
                                <td colspan="3">message2</td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td class="message">
                        <table>
                            <tr>
                                <td rowspan="2">icon</td>
                                <td>username</td>
                                <td>time</td>
                                <td>menu</td>
                            </tr>
                            <tr>
                                <td colspan="3">message3</td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td class="message">
                        <table>
                            <tr>
                                <td>time</td>
                                <td>menu</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td colspan="3">my message1</td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td class="message">
                        <table>
                            <tr>
                                <td rowspan="2">icon</td>
                                <td>username</td>
                                <td>time</td>
                                <td>menu</td>
                            </tr>
                            <tr>
                                <td colspan="3">message3</td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td class="message">
                        <table>
                            <tr>
                                <td>time</td>
                                <td>menu</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td colspan="3">my message2</td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td class="message">
                        <table>
                            <tr>
                                <td>time</td>
                                <td>menu</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td colspan="3">my message3</td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </td>
    </tr>

    <tr>
        <td class="send_message_row">
            <table class="send_message_panel">
                <tr>
                    <td class="send_message_attach_file_width">
                        <svg version="1.1"
                             viewBox="0 0 64 64"
                             width="50" height="50">
                            <path d="M 40,50 l-23-23 c0,0 -6,-6 0,-12 6,-6 12,0 12,0 l 27,25 c0,0 7,10 0,17 -9,9 -18,1 -18,1 L8,28 c0,0 -10,-13 0,-23 10,-9 22,0 22,0 l27,27"
                                  fill="none"
                                  stroke="DimGray" stroke-width="3px"/>
                        </svg>
                    </td>
                    <td class="send_message_tag_width">
                        <svg version="1.1"
                             viewBox="0 0 120 120"
                             width="50" height="50">
                            <path d="m15 57 c-1,3 1,7 3,9 l45 45 c6,5 15,5 21,0 L111 85 c5,-6 5,-15 0,-21 L66 19 C64,16 61,15 57,15 L24 17 C21,17 18,20 18,24 Z"
                                  fill="none"
                                  stroke="DimGray" stroke-width="3px"/>
                            <path d="M32,32 C28,38 18,37 12,32 6,25 4,16 10,9 15,4 25,5 32,12"
                                  fill="none"
                                  stroke="DimGray" stroke-width="5px"/>
                        </svg>
                    </td>
                    <td>
                        <textarea class="send_message_panel_textfield"></textarea>
                    </td>
                    <td class="send_message_button" onclick="ui.utils.speak('Привет')">
                        <svg version="1.1"
                             viewBox="0 0 66 64"
                             width="50" height="50">
                            <path d="M32,2 c-2,0 -4,2 -4,4 v16 c0,2 -2,2 -2,2 h-20 c-2,0 -4,2 -4,4 v29 c0,2 2,4 4,4 h53 c2,0 4,-2 4,-4 v-51 c0,-2 -2,-4 -4,-4 Z"
                                  fill="none"
                                  stroke="DimGray" stroke-width="3px"/>
                            <path d="m45,17 v25 c0,2 -2,2 -2,2 h-25 v3 l-3-3 l3-3 v3"
                                  fill="none"
                                  stroke="DimGray" stroke-width="3px"/>
                        </svg>
                </tr>
            </table>
        </td>
    </tr>
</table>

<audio src="" id="audio"></audio>

<!--DIALOG-->
<table class="login modal">
    <tr>
        <td align="center" valign="middle">
            <form action="#" method="post" onsubmit="ui.dialog.login.onsubmit(); return false;">
                <table class="shadow">
                    <tr>
                        <td colspan="3">Войдите на сайт под своей учетной записью</td>
                    </tr>
                    <tr>
                        <td class="align_right">Username</td>
                        <td colspan="2"><input name="username" type="text" tabindex="1"/></td>
                    </tr>
                    <tr>
                        <td class="align_right">Password</td>
                        <td colspan="2"><input name="password" type="password" tabindex="2"/></td>
                    </tr>
                    <tr>
                        <td>
                            <input name="toRegistration" type="button" value="Регистрация"
                                   onclick="ui.dialog.login.registration.onclick()">
                        </td>
                        <td class="align_right">
                            <input type="submit" value="Вход" tabindex="3"/>
                        </td>
                    </tr>
                </table>
            </form>

        </td>
    </tr>
</table>

<table class="registration modal">
    <tr>
        <td align="center" valign="middle">
            <form action="#" method="post" onsubmit="ui.dialog.registration.onsubmit(); return false;">
                <table class="shadow">
                    <tr>
                        <td colspan="2">Регистрация пользователя</td>
                    </tr>
                    <tr>
                        <td class="align_right">Username</td>
                        <td><input name="username" type="text" tabindex="1"/></td>
                    </tr>
                    <tr>
                        <td class="align_right">Password</td>
                        <td><input name="password" type="password" tabindex="2"/></td>
                    </tr>
                    <tr>
                        <td class="align_right">Confirm Password</td>
                        <td><input name="confirmPassword" type="password" tabindex="3"/></td>
                    </tr>
                    <tr>
                        <td><input type="button" value="Вход" onclick="ui.dialog.registration.login.onclick()"/></td>
                        <td class="align_right"><input type="submit" value="Регистрация" tabindex="4"/></td>
                    </tr>
                </table>
            </form>
        </td>
    </tr>
</table>

<div class="user_info_menu_dialog shadow" onmouseleave="ui.left_panel.user_info.menu.hide();">
    <ul>
        <li class="item">Редактировать профиль TODO</li>
        <li class="item">Разрешить уведомления TODO</li>
        <li>
            Сменить статус
            <ul>
                <li class="item">ACTIVE TODO</li>
                <li class="item">INACTIVE TODO</li>
            </ul>
        </li>
        <li class="item" onclick="ui.left_panel.user_info.menu.exit.onclick()">Выход</li>
    </ul>
</div>

<div class="finding_area_dialog shadow">
    <label><input type="radio" name="findingArea" value="user" checked="checked">Искать среди пользователей</label>
    <label><input type="radio" name="findingArea" value="contact">Искать в моих контактах</label>
    <label><input type="radio" name="findingArea" value="chat">Искать в текущей переписке TODO</label>
    <label><input type="radio" name="findingArea" value="all_message">Искать по всем сообщениям TODO</label>
</div>

<table class="search_user_dialog shadow">
    <tr>
        <td class="dialog_title">Поиск пользователя</td>
        <td></td>
        <td class="dialog_close" onclick="ui.dialog.search_user_dialog.hide()">X</td>
    </tr>
    <tr class="find_row">
        <td class="find_textfield">
            <input type="text" onkeydown="ui.dialog.search_user_dialog.textfield.onkeydown(event)"/>
        </td>
        <td class="find_button" onclick="ui.dialog.search_user_dialog.find()">
            <svg version="1.1" width="20" height="20">
                <circle cx="9" cy="8" r="5" fill="DimGray "/>
                <line x1="14" y1="13" x2="19" y2="18" stroke-width="2" stroke="DimGray"/>
            </svg>
        </td>
        <td></td>
    </tr>
    <tr>
        <td colspan="3" class="dialog_body">
            <div class="search_user_dialog_list">
                <table>
                </table>
            </div>
        </td>
    </tr>
</table>

<table class="user_info_dialog shadow">
    <tr>
        <td class="dialog_title">Профиль пользователя</td>
        <td class="dialog_close" onclick="ui.dialog.user_info_dialog.hide()">X</td>
    </tr>
    <tr>
        <td colspan="2" class="dialog_body">
            <table>
                <tr>
                    <td colspan="2">icon</td>
                </tr>
                <tr>
                    <td>Username:</td>
                    <td class="username">Izan</td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</body>
</html>